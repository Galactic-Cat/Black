<!DOCTYPE html>
<div id="newprofile" class="mdc-elevation--z3 box" style="display: none;">
  <h1 class="mdc-typography--title">Create a new profile</h1>
  <p class="mdc-typography--body2" style="margin-bottom: 0;">Start off by setting information about yourself.</p>
  <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield" style="margin-top: 5px;">
    <input id="realName" type="text" class="mdc-textfield__input">
    <label class="mdc-textfield__label">Your first name</label>
  </div>

  <div class="mdc-form-field">
    <p class="mdc-typography--body1">Do you have a penis? (Are you male?)</p>
    <div class="mdc-radio">
      <input class="mdc-radio__native-control" type="radio" id="genderReal-true" name="genderReal">
      <div class="mdc-radio__background">
        <div class="mdc-radio__outer-circle"></div>
        <div class="mdc-radio__inner-circle"></div>
      </div>
    </div>
    <label id="genderReal-true-label" for="genderReal-true">Yes</label>
    &nbsp;
    <div class="mdc-radio" data-mdc-auto-init="MDCRadio">
      <input class="mdc-radio__native-control" type="radio" id="genderReal-false" name="genderReal">
      <div class="mdc-radio__background">
        <div class="mdc-radio__outer-circle"></div>
        <div class="mdc-radio__inner-circle"></div>
      </div>
    </div>
    <label id="genderReal-false-label" for="genderReal-false">No</label>
  </div>

  <hr>
  <p class="mdc-typography--body2">Now answer some questions about your mistress:</p>

  <p class="mdc-typography--body1" style="margin-bottom: 0;">My mistress calls me a:</p>
  <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield" style="margin-top: 5px;">
    <input type="text" class="mdc-textfield__input" id="genderNick">
    <label for="genderNick" class="mdc-textfield__label">Boy/Girl/Pet/Slave/Other</label>
  </div>
  <p class="mdc-typography--caption" style="margin: 0;">As in: "You've been a good <span id="genderNick-example" style="color: var(--mdc-theme-accent);">slave</span>."</p>
  <br>

  <p class="mdc-typography--body1" style="margin-bottom: 0;">She also has a nickname for me, namely:</p>
  <div id="nickname-textfield" class="mdc-textfield" data-mdc-auto-init="MDCTextfield" style="margin-top: 5px;">
    <input type="text" class="mdc-textfield__input" id="nickname">
    <label for="nickname" class="mdc-textfield__label">Nickname</label>
  </div>
  <p class="mdc-typography--caption" style="margin: 0;">Your nickname can be changed by CTIS cards.</p>
  <div class="mdc-form-field">
    <div class="mdc-checkbox">
      <input type="checkbox" id="noNickname" class="mdc-checkbox__native-control"/>
      <div class="mdc-checkbox__background">
        <svg class="mdc-checkbox__checkmark" viewbox="0 0 24 24">
          <path class="mdc-checkbox__checkmark__path" fill="none" stroke="white" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
        </svg>
        <div class="mdc-checkbox__mixedmark"></div>
      </div>
    </div>
    <label for="noNickname">Don't use nicknames.</label>
  </div>
  <hr>
  <button type="button" id="saveProfile" class="mdc-button mdc-button--raised mdc-button--primary mdc-ripple" data-mdc-auto-init="MDCRipple">Save Profile</button>
</div>

<div id="profile" class="mdc-elevation--z3 box">
  <h1 class="mdc-typography--title">Your profile</h1>
  <p class="mdc-typography--body1">Your real name is <span class="profile-card profile-name-real"></span>.</p>
  <p class="mdc-typography--body1">Your nickname from mistress is <span class="profile-card profile-name-nick"></span>.</p>
  <p class="mdc-typography--body1">Your submission level is <span class="profile-card profile-sublevel"></span>.<br>
  <span class="mdc-typography--caption">Submission level between 5 and -5. 5 is completely submissive, -5 is completely defiant.</span></p>
  <p class="mdc-typography--body1">Your gender is <span class="profile-gender-real"></span>,</p>
  <p class="mdc-typography--body1">But to mistress you're just a <span class="profile-card profile-gender-nick"></span>.</p>
  <br>
  <button type="button" class="mdc-button mdc-button--raised mdc-ripple" data-mdc-auto-init="MDCRipple" id="editProfileBtn" disabled>Edit Profile</button>
  &nbsp;
  <button type="button" class="mdc-button mdc-button--raised mdc-ripple" data-mdc-auto-init="MDCRipple" id="deleteProfileBtn">Delete Profile</button>
  <br>
  <span class="mdc-typography--caption">Editing is as of yet impossible, if you must change your profile you need to delete and re-make it.</span>
</div>

<script type="text/javascript">
  /* global $, mdc, config, alert, swapper */
  // var genderReal = new mdc.radio.MDCRadio($('.mdc-radio')[0])
  // var noNickname = new mdc.checkbox.MDCCheckbox($('.mdc-checkbox')[0])
  $('[name="genderReal"]').click(_ => {
    config.set('profile.gender.real', $('#genderReal-true').is(':checked'))
  })
  $('#realName').on('change', _ => {
    config.set('profile.name.real', $('#realName').val())
  })
  $('#genderNick').on('change', _ => {
    $('#genderNick').val() === '' ? config.set('profile.gender.nick', 'slave') : config.set('profile.gender.nick', $('#genderNick').val())
    $('#genderNick-example').text($('#genderNick').val())
  })
  $('#nickname').on('change', _ => {
    if ($('#nickname').val() !== '') {
      config.set('profile.name.nick', $('#nickname').val())
    } else {
      config.set('profile.name.nick', undefined)
    }
  })
  $('#noNickname').on('change', _ => {
    if ($('#noNickname').is(':checked')) {
      $('#nickname-textfield').slideUp(100)
      config.set('profile.name.nick', false)
    } else {
      $('#nickname-textfield').slideDown(100)
      config.set('profile.name.nick', $('#nickname').val())
    }
  })
  $('#saveProfile').click(_ => {
    let profiledata = [
      config.get('profile.name.real'),
      config.get('profile.name.nick'),
      config.get('profile.gender.real'),
      config.get('profile.gender.nick')
    ]
    if (profiledata.length >= 4) {
      config.set('stats.total.cumming', {full: 0, edge: 0, ruin: 0, nonAllowed: 0})
      config.set('stats.lastTease.cumming', {full: 0, edge: 0, ruin: 0, nonAllowed: 0})
      config.set('profile.sublevel', 0)
      alert('Profile saved.')
      swapper.swap('home')
    } else {
      alert('Not all fields seem to be filled (correctly). Please make sure they are before saving!')
    }
  })

  if (config.get('profile') === undefined) {
    $('#newprofile').show()
    $('#profile').hide()
  } else {
    $('.profile-card').each((i) => {
      let el = $('.profile-card')[i]
      $(el).text(config.get($(el).attr('class').split(' ')[1].split('-').join('.')))
    })
    if (config.get('profile.gender.real')) {
      $('.profile-gender-real').text('male')
    } else {
      $('.profile-gender-real').text('female')
    }
  }

  $('#deleteProfileBtn').click(_ => {
    config.set('profile', undefined)
    alert('Profile deleted.')
    swapper.swap('home')
  })

  $('#swapper').ready(_ => {
    mdc.autoInit()
  })
</script>
