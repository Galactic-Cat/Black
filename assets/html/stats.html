<!DOCTYPE html>
<div class="mdc-elevation--z3 box">
  <h1 class="mdc-typography--title">Statistics</h1>
  <style media="screen">
    th, td {
      padding: 5px;
      flex: 2;
    }
    tr > td:last-child {
      flex: 1;
      text-align: right;
    }
    tr {
      display: flex;
    }
    thead > tr {
      background-color: rgba(0, 0, 0, 0.2) !important;
    }
    tr {
      background-color: rgba(0, 0, 0, 0.1);
    }
    table {
      width: 85%;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
    }
  </style>
  <h1 class="mdc-typography--subheading1">Teases</h1>
  <table>
    <thead>
      <tr>
        <th>Description</th><th>Statistic</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Teases started</td><td getstat="stats.teases.total">0</td>
      </tr>
      <tr>
        <td>Teases quit manually</td><td getstat="stats.teases.etes">0</td>
      </tr>
    </tbody>
  </table>
  <h1 class="mdc-typography--subheading1">Cumming</h1>
  <table>
    <thead>
      <tr>
        <th>Description</th><th>Statistic</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>Total</th>
      </tr>
      <tr>
        <td>Full orgasms</td><td getstat="stats.total.cumming.full">0</td>
      </tr>
      <tr>
        <td>Ruined orgasms</td><td getstat="stats.total.cumming.ruin">0</td>
      </tr>
      <tr>
        <td>Edges</td><td getstat="stats.total.cumming.edge">0</td>
      </tr>
      <tr>
        <td>Without permission</td><td getstat="stats.total.cumming.nonAllowed">0</td>
      </tr>
      <tr>
        <th>Last Tease</th>
      </tr>
      <tr>
        <td>Full orgasms</td><td getstat="stats.lastTease.cumming.full">0</td>
      </tr>
      <tr>
        <td>Ruined orgasms</td><td getstat="stats.lastTease.cumming.ruin">0</td>
      </tr>
      <tr>
        <td>Edges</td><td getstat="stats.lastTease.cumming.edge">0</td>
      </tr>
      <tr>
        <td>Without permission</td><td getstat="stats.total.cumming.nonAllowed">0</td>
      </tr>
    </tbody>
  </table>
  <h1 class="mdc-typography--subheading1">Punishments</h1>
  <table>
    <thead>
      <tr>
        <th>Description</th><th>Statistic</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Punishments deserved</td><td getstat="stats.total.punishments.deserved">0</td>
      </tr>
      <tr>
        <td>Punishments drawn</td><td getstat="stats.total.punishments.drawn">0</td>
      </tr>
    </tbody>
  </table>
</div>

<script type="text/javascript">
  /* global $, mdc, config */
  function getStat (gr) {
    console.debug('<stats.html / getStat>\nFunction called with gr:', gr)
    let stat = config.get(gr)
    if (stat === undefined) {
      console.warn('<stats.html / getStat>\nStat', gr, 'found undefined.')
      return 0
    } else if (typeof stat === 'object') {
      return stat[0]
    } else {
      return stat
    }
  }

  $('[getstat]').each(function (i) {
    let gr = $(this).attr('getstat')
    $(this).text(getStat(gr))
  })

  $('tbody > tr:odd').css('background-color', 'rgba(0, 0, 0, 0.15)')

  $('#swapper').ready(_ => {
    mdc.autoInit()
  })
</script>
