<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Black CTIS Viewer</title>
    <link rel="stylesheet" href="./external/material-design-icons/material-icons.css">
    <link rel="stylesheet" href="./css/material-components-web.min.css">
    <!-- <link rel="stylesheet" href="./css/black.css?v=1"> -->
    <link rel="stylesheet" id="theme">
  </head>
  <body class="mdc-typography mdc-theme--dark">

    <header id="appheader" class="frame" style="text-align: center;">
      <div style="float: left">
        <i id="menu-btn" class="native-btn material-icons" style="display: inline;">menu</i>
        <i id="home-btn" class="native-btn material-icons" onclick="swapper.swap('home')" style="display: inline;">home</i>
      </div>
      <h1 class="mdc-typography--subheading1" style="margin: 0; display: inline; vertical-align: top; cursor: default;">Black</h1>
      <div style="float: right;">
        <i id="theme-btn" class="native-btn material-icons">color_lens</i>
        <i id="min-btn" class="native-btn material-icons">remove</i>
        <i id="max-btn" class="native-btn material-icons">fullscreen</i>
        <i id="close-btn" class="native-btn material-icons">close</i>
      </div>
    </header>

    <aside class="mdc-temporary-drawer">
      <nav class="mdc-temporary-drawer__drawer">
        <header class="mdc-temporary-drawer__header frame">
          <div class="mdc-temporary-drawer__header-content">
            Black CTIS
          </div>
        </header>
        <nav class="mdc-temporary-drawer__content mdc-list">
          <a class="mdc-list-item mdc-temporary-drawer--selected" onclick="swapper.swap('home')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">home</i>Start
          </a>
          <a class="mdc-list-item" onclick="swapper.swap('setup')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">dashboard</i>Teasing Dashboard
          </a>
          <a class="mdc-list-item" onclick="swapper.swap('cardmaker')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">create</i>Card Maker
          </a>
          <a class="mdc-list-item" onclick="swapper.swap('stats')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">assessment</i>Statistics
          </a>
          <a class="mdc-list-item" onclick="swapper.swap('profile')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">person</i>Profile
          </a>
        </nav>
        <nav class="mdc-temporary-drawer__content mdc-list">
          <hr style="width: 90%; border-color: grey;">
          <a class="mdc-list-item" onclick="swapper.swap('settings')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">settings</i>Settings
          </a>
          <!-- <a class="mdc-list-item" onclick="swapper.swap('feedback')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">feedback</i>Feedback
          </a> -->
          <!--<a class="mdc-list-item" onclick="swapper.swap('about')">
            <i class="material-icons mdc-list-item__start-detail" aria-hidden="true">info</i>About
          </a>-->
          <h1 class="mdc-list-item mdc-typography--body1">Black made by Simon</h1>
        </nav>
      </nav>
    </aside>

    <main id="swapper">

    </main>

    <!-- Scripts -->
    <script src="./catworks/native.js"></script>
    <script type="text/javascript">
      const Theme = require('./catworks/themer.js')
      const $ = require('jquery')
      const mdc = require('material-components-web/dist/material-components-web.min.js')
      const Swapper = require('./catworks/swapper.js')
      const Config = require('electron-config')
      const {dialog, BrowserWindow, globalShortcut, shell, app} = require('electron').remote
      const {TeaseMaster, generateFileList, findCTIS} = require('./tease.js')
      const fs = require('fs')

      var currentVersion = app.getVersion()

      var config = new Config()

      var theme = new Theme({
        themelist: [
          // 'red',
          'red.dark',
          // 'blue',
          'blue.dark',
          // 'green',
          'green.dark',
          // 'yellow',
          'yellow.dark',
          // 'purple',
          'purple.dark',
          // 'dark',
          'black.dark'
        ],
        active: config.get('theme.index')
      })

      var swapper = new Swapper('swapper', './html/', 'none')
      swapper.start('continue', 'home')

      if (theme.active === -1) {
        theme.setTheme('red.dark')
      } else {
        theme.setTheme(theme.active)
      }

      $('#theme-btn').on('click', _ => {
        if (theme.active === theme.themelist.length - 1) {
          theme.setTheme(0)
        } else {
          theme.setTheme(theme.active + 1)
        }
      })

      $(document).ready(_ => {
        mdc.autoInit()
        let drawer = new mdc.drawer.MDCTemporaryDrawer($('.mdc-temporary-drawer')[0])
        $('#menu-btn').click(_ => { drawer.open = true })
        $('.mdc-temporary-drawer__content').children().click(_ => { drawer.open = false })
        if (dialog && TeaseMaster && globalShortcut && generateFileList && findCTIS && BrowserWindow && shell && fs && currentVersion) { console.debug('<index.html> Loaded everything we needed or something!') }
      })
    </script>
  </body>
</html>
