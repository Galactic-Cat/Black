<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Black - Tease</title>
    <link rel="stylesheet" href="../css/material-icons/material-icons.css">
    <link rel="stylesheet" href="../css/material-components-web/material-components-web.min.css">
    <link rel="stylesheet" id="theme">
    <style>
        html {
            background-color: black;
        }
        html, body, #tease {
            height: 100vh;
            width: 100vw;
        }

        #leftBar {
            left: 0;
            margin: 3px 0 0 3px;
            overflow: auto;
            top: 0;
            z-index: 3;
        }
        
        #rightBar {
            margin: 3px 3px 0 0;
            overflow: auto;
            right: 2px;
            top: 2px;
            z-index: 2;
        }
        
        .sidebar {
            bottom: 0;
            top: 0;
            width: 15%;
            min-width: 100px;
            max-width: 200px;
        }

        .sidebar-controls {
            position: absolute;
            top: 2px;
            right: 2px;
            text-align: right;
            z-index: 3;
        }

        th {
            text-align: left;
        }
        td {
            text-align: right;
        }

        .sidebar-smaller {
            max-height: 28px !important;
        }
        
        #topBar {
            top: 0;
            height: 5%;
            max-height: 5%;
            position: fixed;
        }

        #view {
            display: block;
            left: 50%;
            max-height: calc(100vh - 100px);
            max-width: calc(100vw - 450px);
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        #view-container {
            height: 100vh;
            position: fixed;
            top: 0;
            width: 100vw;
            z-index: 0;
        }
    </style>
</head>
<body class="mdc-typography">
    
    <main id="preTease" style="text-align: center;">
        <h1 class="mdc-typograpy--title">Your tease is ready.</h1>
        <div id="startcards-container" style="display: none;">
            <h1 class="mdc-typography--subtitle2">The following cards will be active from the start:</h1>
            <div id="startcards"></div>
        </div>
        <button class="mdc-button mdc-button--primary mdc-button--raised" onclick="tease.start()">Start Tease</button>
    </main>
    
    <main id="tease" style="display: none;">
        <div id="leftBar" class="sidebar">
            <div class="mdc-card">
                <div class="mdc-card__media mdc-card__media--16-9" card-bg="../img/sidebarimage1.jpg">
                    <div class="sidebar-controls">
                        <i class="material-icons native-btn" visibility>visibility_off</i>
                        <i class="material-icons native-btn" unfold="less">unfold_less</i>
                        <i class="material-icons native-btn" expand="less">expand_less</i>
                    </div>
                    <div class="mdc-card__media-content" style="padding: 2px;">Information</div>
                </div>
                <div class="mdc-card__body">
                    <table style="padding: 0 5px; width: 100%;">
                        <tbody>
                            <tr id="info-slide">
                                <th>Slide</th>
                                <td>0</td>
                            </tr>
                            <tr id="info-strokes">
                                <th>Strokes</th>
                                <td>10</td>
                            </tr>
                            <tr id="info-slidetime">
                                <th>Slidetime</th>
                                <td>10</td>
                            </tr>
                            <tr id="info-paused" style="display: none;">
                                <th>Paused</th>
                                <td></td>
                            </tr>
                            <tr id="info-muted" style="display: none;">
                                <th>Muted</th>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mdc-card" style="margin-top: 10px;">
                <div class="mdc-card__media mdc-card__media--16-9" card-bg="../img/sidebarimage2.jpg">
                    <div class="sidebar-controls">
                        <i class="material-icons native-btn" visibility>visibility_off</i>
                        <i class="material-icons native-btn" unfold="less">unfold_less</i>
                        <i class="material-icons native-btn" expand="less">expand_less</i>
                    </div>
                    <div class="mdc-card__media-content" style="padding: 2px;">Status</div>
                </div>
                <div class="mdc-card__body" style="padding: 0 5px;">
                    <h1 id="info-chastity" class="mdc-typography--subtitle2" style="display: none;"><b>In Chastity</b></h1>
                    <h1 class="mdc-typography--subtitle2"><b>Cumming</b><br>&nbsp;&nbsp;<span id="info-cumming">Not Allowed</span></h1>
                    <h1 class="mdc-typography--subtitle2"><b>Mood</b><br>&nbsp;&nbsp;<span id="info-mood" class="material-icons">thumbs_up_down</span></h1>
                    <div id="info-position-container">
                        <h1 class="mdc-typography--subtitle2" style="margin-bottom: 0;"><b>Position</b></h1>
                        <span id="info-position" class="mdc-typography--body2" style="margin-left: 3px;">Free</span>
                    </div>
                    <div id="info-instructions-container">
                        <h1 class="mdc-typography--subtitle2" style="margin-bottom: 2px;"><b>Instructions</b></h1>
                        <div id="info-instructions" class="mdc-typography--body2" style="margin-left: 3px;">

                        </div>
                    </div>
                </div>
            </div>

            <div class="mdc-card" style="margin-top: 10px;">
                <div class="mdc-card__media mdc-card__media--16-9" card-bg="../img/sidebarimage3.jpg">
                    <div class="sidebar-controls">
                        <i class="material-icons native-btn" visibility>visibility_off</i>
                        <i class="material-icons native-btn" unfold="less">unfold_less</i>
                        <i class="material-icons native-btn" expand="less">expand_less</i>
                    </div>
                    <div class="mdc-card__media-content" style="padding: 2px;">Items</div>
                </div>
                <div id="info-items" class="mdc-card__body" style="padding: 0 5px;">
                    
                </div>
            </div>
        </div>
        
        <div id="topBar">
            
        </div>
        
        <div id="view-container">
            <img id="view" src="" />
        </div>
        
        <div id="rightBar" class="sidebar">
            
        </div>

        <aside id="contact-element" class="mdc-dialog" role="alertdialog" aria-labelledby="contact-label" aria-describedby="contact-description">
            <div class="mdc-dialog__surface">
                <header class="mdc-dialog__header">
                    <h2 class="mdc-dialog__header__title">
                        <i id="contact-icon" class="material-icons" style="vertical-align: sub;"></i>
                        <span id="contact-label"></span>
                    </h2>
                </header>
                <section id="contact-description" class="mdc-dialog__body" style="color: var(--mdc-theme-text-secondary-on-dark);"></section>
                <footer id="contact-footer-message" class="mdc-dialog__footer" style="display: none; text-align: right;">
                    <button id="contact-dismiss" class="mdc-button mdc-button--primary">Dismiss</button>
                </footer>
                <footer id="contact-footer-prompt" class="mdc-dialog__footer" style="display: none;">
                    <div class="mdc-text-field" style="left: 5%; width: 80%; position: absolute; bottom: 7px;">
                        <input type="text" id="contact-prompt" class="mdc-text-field__input">
                        <label for="contact-prompt" class="mdc-floating-label mdc-floating-label--float-above">Input</label>
                        <div class="mdc-line-ripple"></div>
                    </div>
                    <button id="contact-submit" class="mdc-button mdc-button--primary" style="float: right;">Submit</button>
                </footer>
                <footer id="contact-footer-options" class="mdc-dialog__footer" style="display: none;"></footer>
            </div>
            <div class="mdc-dialog__backdrop"></div>
        </aside>
    </main>
    
    <footer id="toolbar" style="display: none;">
        
    </footer>

    <div class="mdc-snackbar" aria-live="assertive" aria-atomic="true" aria-hidden="true">
        <div class="mdc-snackbar__text"></div>
        <div class="mdc-snackbar__action-wrapper">
            <button type="button" class="mdc-snackbar__action-button"></button>
        </div>
    </div>
    
    <!-- <event-catcher style="display: none;"></event-catcher> -->
    
    <!-- Script -->
    
    <script>
        const Store = require('electron-store')
        const $ = require('jquery')
        const mdc = require('material-components-web/dist/material-components-web')
        const { isNullOrUndefined, isNull, isObject, isBoolean, isString, isNumber, isArray } = require('util')
        const fs = require('fs')
        
        var storage = new Store()
    </script>
    <!-- <script src="../ts/tease/tease.ts" type="module"></script> -->
    <script>
        import Theme from '../js/catworks/themer.js'
        import Tease from '../ts/tease/tease.ts'
        //import * as Mousetrap from 'mousetrap'
        var tease = new Tease()

        var theme = new Theme({
            active: storage.get('theme.index'),
            path: '../themes/',
            themelist: [
                // 'red',
                'red.dark',
                // 'blue',
                'blue.dark',
                // 'green',
                'green.dark',
                // 'yellow',
                'yellow.dark',
                // 'purple',
                'purple.dark',
                // 'black',
                'black.dark'
            ]
        })
        theme.setTheme(storage.get('theme.index') || 0)
        if (theme.active < 0 || theme.active >= theme.themelist.length) theme.setTheme(0)

        $('[card-bg]').each((i, el) => {
            $(el).css('background', `linear-gradient(var(--mdc-theme--halfopacity), var(--mdc-theme--halfopacity)), url(${$(el).attr('card-bg')})`)
        })

        $('[unfold]').click((data) => {
            let el = data.currentTarget
            let sidebar = $(el).parent().parent()
            if ($(el).attr('unfold') == 'less') {
                $(el).attr('unfold', 'more').text('unfold_more')
                $(sidebar).addClass('sidebar-smaller')
            } else {
                $(el).attr('unfold', 'less').text('unfold_less')
                $(sidebar).removeClass('sidebar-smaller')
            }
        })

        $('[expand]').click((data) => {
            let el = data.currentTarget
            let card = $(el).parent().parent().parent()
            let unfold = $(el).siblings('[unfold]')
            if ($(el).attr('expand') == 'less') {
                $(el).attr('expand', 'more').text('expand_more')
                if ($(unfold).attr('unfold') == 'less') {
                    $(unfold).click()
                    $(unfold).prop('reunfold', true)
                }
                $(unfold).hide()
                $(card).children('.mdc-card__body, .mdc-card__actions').slideUp(200)
                $(card)
            } else {
                $(el).attr('expand', 'less').text('expand_less')
                if ($(unfold).prop('reunfold')) {
                    $(unfold).click()
                    $(unfold).removeProp('reunfold')
                }
                $(unfold).show()
                $(card).children('.mdc-card__body, .mdc-card__actions').slideDown(200)
            }
        })
        
        $('[visibility]').click((data) => {
            let el = data.currentTarget
            let card = $(el).parent().parent().parent()
            $(card).slideUp(200)
        })

        $(document).ready(() => {
            mdc.autoInit()
        })
    </script>
</body>
</html>
